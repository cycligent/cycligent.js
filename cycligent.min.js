/*
 2008-2015 Improvement Interactive All Rights Reserved Worldwide
 @license
 Copyright 2008-2015 Improvement Interactive All Rights Reserved Worldwide

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
window.cycligent||(window.cycligent={root:{app:"",name:"",client:"",deploy:"",context:""}});
cycligent.EarlyLoader=function(a,b,c){function d(){0>navigator.appName.indexOf("Netscape")&&"loaded"!=window.event.srcElement.readyState&&"complete"!=window.event.srcElement.readyState||(0<=navigator.appName.indexOf("Netscape")?e.removeEventListener("load",d,!1):e.detachEvent("onreadystatechange",d),clearTimeout(g),c())}var g=setTimeout(function(){console.error('The load of "'+b+'" failed. The system is unable to start the application.')},"localhost"==location.hostname||""==location.hostname?7E3:
7E4),e=document.createElement("script");e.id=a;e.type="text/javascript";e.src=b;0<=navigator.appName.indexOf("Netscape")?e.addEventListener("load",d,!1):e.attachEvent("onreadystatechange",d);document.getElementsByTagName("head")[0].appendChild(e)};
cycligent.browser=function(){var a={ie:!1,chrome:!1,firefox:!1,safari:!1,version:null},b=navigator.userAgent;if(0<=navigator.appName.indexOf("Netscape"))if(0<=b.indexOf("Chrome"))a.chrome=!0;else if(0<=b.indexOf("Firefox"))a.firefox=!0;else if(0<=b.indexOf("Safari"))a.safari=!0;else{var c=-1;null!=/Trident\/.*rv:([0-9]{1,}[/.0-9]{0,})/.exec(b)&&(c=parseFloat(RegExp.$1));10<=c&&(a.ie=!0,a.version=c)}else a.ie=!0,c=b.indexOf("MSIE "),0<=c&&(a.version=parseFloat(b.substring(c+5,b.indexOf(";",c))));return a}();
cycligent.console=function(){function a(a){for(var b=0;b<g.length;b++)g[b](a)}function b(){d.splice(0,d.length);for(var b in h)h.hasOwnProperty(b)&&(f[b]=0);a()}function c(b,c){for(var g="",h=0;h<c.length;h++)var q=c[h],g=null===q?g+"null":void 0===q?g+"undefined":g+c[h].toString();g=new m(b,g);d.push(g);100<d.length&&d.shift();e[b]&&e[b].apply(console,c);void 0!==f[b]&&f[b]++;a(g)}var d=[],g=[],e={},f={},h={info:"info",log:"log",warn:"warn",error:"error"},m=function(a,b,c){void 0===h[a]&&console.error("Unknown message type '"+
a+"' detected in cycligent.console.");this.type=a;this.message=b;this.timestamp=c?c:new Date};b();return{init:function(){window.console&&window.console.log&&window.console.log.apply?(e.info=console.info,e.log=console.log,e.warn=console.warn,e.error=console.error):window.console={};window.console.info=cycligent.console.info;window.console.log=cycligent.console.log;window.console.warn=cycligent.console.warn;window.console.error=cycligent.console.error;window.console.exception=cycligent.console.error},
messageType:h,Message:m,messages:d,clear:b,count:function(a){return void 0===a?d.length:void 0===f[a]?0:f[a]},notify:function(a){for(var b=0;b<g.length;b++)if(a===g[b])return;g.push(a)},notifyClear:function(a){for(var b=0;b<g.length;b++)a===g[b]&&(g.splice(b,1),b--)},message:function(a,b,e){for(var d=[],f=1;f<arguments.length;f++)d.push(arguments[f]);c(a,d)},info:function(a,b){c(h.info,arguments)},log:function(a,b){c(h.log,arguments)},warn:function(a,b){c(h.warn,arguments)},error:function(a,b){c(h.error,
arguments)}}}();cycligent.console.init();
cycligent.url=function(a,b){function c(a,b){var c=/(?:\.([^.]+))?$/.exec(a)[1];return c&&"min"!=c&&0<="htm html js css gif jpg png cgi pl java class php php3 shtm shtml asp cfm cfml".split(" ").indexOf(c)?a:a+"."+b}function d(a,b,c){var d=cycligent.config.loader.roots[a[0]];d?b+=d.root:(b=c,"/"!=c.substr(c.length-1)&&"\\"!=c.substr(c.length-1)&&(b+="/"),b+=a[0]);a.splice(0,1);0<a.length&&"/"!=b.substr(b.length-1,1)&&"\\"!=b.substr(b.length-1,1)&&(b+="/");return b}function g(a){a=a.split("/");0<a[a.length-
1].indexOf(".htm")&&a.splice(a.length-1,1);a=a.join("/");"/"==a&&(a="");return a}var e=b;e||(e="js");a&&""!==a||console.error("Required argument 'dottedId' was not supplied to cycligent.url.");if(0<=a.indexOf("//"))return c(a,e);if("/"==a.substr(0,1))return c(cycligent.root.deploy+a,e);if(0==a.indexOf("@/"))return c(cycligent.root.app+a.substr(1),e);var f,h;switch(a.substr(0,1)){case ".":f=a.substr(1).split(".");h=window.location.protocol+"//"+window.location.host+g(window.location.pathname)+"/";
break;case "^":f=a.substr(1).split(".");h=d(f,cycligent.root.deploy,cycligent.root.deploy);break;case "@":f=a.substr(1).split(".");h=cycligent.root.client+"/";break;default:f=a.split("."),h=d(f,cycligent.root.deploy,window.location.protocol+"//"+window.location.host+g(window.location.pathname))}h+=f.join("/");cycligent.config.production&&(h+="-"+cycligent.config.appVersion);!cycligent.config.minimizeSource||"js"!=e&&"css"!=e||(h+=".min");return h+"."+e};
cycligent.timing=function(){function a(a){for(var b=0;b<c.length;b++)c[b](a)}var b=[],c=[],d=0,g=(new Date).getTime(),e=!1,f=0,h=function(a,c,f){this.title=a;this.startTime=(new Date).getTime();e&&(g=this.startTime,e=!1);void 0!=c&&(d=c);this.indent=d;this.expanded=this.hasChildren=!1;this.visible=0==this.indent;0<b.length&&b[b.length-1].indent<this.indent&&(b[b.length-1].hasChildren=!0);void 0===f?(this.pending=!0,this.external=!1,this.duration=0):(this.duration=f,this.pending=!1,this.external=!0);
this.index=b.length;b.push(this);for(a=b.length-2;0<=a;){f=b[a+1];c=b[a];c.pending&&(c.external||(c.duration=this.startTime-c.startTime,f.external&&c.indent==f.indent&&(c.duration-=f.duration)),c.indent>=this.indent&&(c.endTime=this.startTime));if(0==c.indent){for(c=void 0;a<b.length;)c=b[a],c.pending&&(c.running=c.startTime-g+c.duration,c.pending=void 0===c.endTime),a++;if(200<b.length){for(;200<b.length;)b.shift();for(a=0;a<b.length;a++)b[a].index=a}break}a--}};window.cycligentRunningBase&&(g=(new h("Load HTML file components (css & scripts) - does not include HTML file",
0)).startTime=window.cycligentRunningBase);return{events:b,clear:function(){b.splice(0,b.length);var c=new h("Timings cleared",0);c.idle=!0;c.running=0;a()},TimingEvent:h,event:function(b,c,d){new h(b,c,d);a()},eventIndent:function(b,c,d,e){new h(c,d);new h(e?e:"Network/Other",d+1);b&&f++;a()},asyncBegin:function(b,c){new h(b,c);f++;a()},asyncEnd:function(){this.idle()},idleIndent:function(){f++},idle:function(){if(1<f)f--;else{f=0;var b=new h("Idle",0);b.idle=!0;b.running=0;e=!0;g=void 0;a()}},indent:function(){25>
d&&d++},unindent:function(){0<d&&d--},notify:function(a){for(var b=0;b<c.length;b++)if(a===c[b])return;c.push(a)},notifyClear:function(a){for(var b=0;b<c.length;b++)a===c[b]&&(c.splice(b,1),b--)}}}();
cycligent.loaderValid=function(){if(void 0===cycligent.config.loader)return console.error("Loader section, cycligent.config.loader, is missing from the configuration file."),!1;if(void 0===cycligent.config.loader.roots)return console.error("Root definitions are required but the roots sections, cycligent.config.loader.roots, is missing from the configuration file."),!1;void 0===cycligent.config.loader.timeout&&(cycligent.config.loader.timeout="localhost"==location.hostname||""==location.hostname?7E3:
7E4);return!0};
cycligent.debugValid=function(){void 0===cycligent.config.debug&&(cycligent.config.debug={});void 0===cycligent.config.debug.private&&(cycligent.config.debug.private={});cycligent.config.debug.on||(cycligent.config.debug.private.check=!1);void 0===cycligent.config.debug.args&&(cycligent.config.debug.args={});cycligent.config.debug.on||(cycligent.config.debug.args.check=!1);void 0===cycligent.config.debug.args.arrays&&(cycligent.config.debug.args.arrays={});cycligent.config.debug.args.check||(cycligent.config.debug.args.arrays.check=
!1);void 0===cycligent.config.debug.interfaces&&(cycligent.config.debug.interfaces={});cycligent.config.debug.on||(cycligent.config.debug.interfaces.check=!1);cycligent.config.debug.on||(cycligent.config.debug.scripts=!1);return!0};
cycligent.boot=function(){cycligent.timing.event("Boot Cycligent",0);cycligent.debug={argTypeText:function(a){if(null===a)return"null";void 0!==a.tagName?a="HtmlElement:"+a.tagName+" or XmlNode:"+a.tagName:a.nodeName&&"#document"==a.nodeName?a="Document":a.cycligentClass?a=a.cycligentClass:a.prototype instanceof Interface?a=a.name:a.constructor===Function?a=cycligent.debug.functionName(a):(a=cycligent.debug.functionName(a.constructor),"(?)"==a&&(a="Unknown"));return a},specTypeText:function(a){return"string"==
typeof a?a:a.prototype&&a.prototype.cycligentClass?a.prototype.cycligentClass:this.argTypeText(a)},functionName:function(a){var b=a.toString().match(/function\s*(\w+)\(/);return null===b?a===jQuery?"jQuery":"(?)":b[1]}};(function(){var a=!1;window.Class=function(){};Class.extend=function(b,c){function d(){!a&&this.init&&this.init.apply(this,arguments)}a=!0;var g=new this;g.cycligentClass=b;a=!1;var e,f;for(f in c)c.hasOwnProperty(f)&&(e=g[f],g[f]=c[f],"function"==typeof g[f]&&e&&(g[f].super=e));d.prototype=
g;d.constructor=d;d.extend=arguments.callee;return d}})();(function(){window.Interface=function(){};Interface.extend=function(a){function b(){}var c=new this,d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);b.prototype=c;b.constructor=b;b.extend=arguments.callee;return b}})();cycligent.args=function(a,b,c){function d(a,b){if("string"==typeof a){var c;c=a.match(/\w+(?=($|:))/);c=null===c?c:c[0];switch(c){case "Any":break;case "HtmlElement":if(void 0===b.tagName||":"==a.substr(11,1)&&a.substr(12).toLowerCase()!=
b.tagName.toLowerCase())return!1;break;case "XmlNode":if(void 0===b.tagName||":"==a.substr(7,1)&&a.substr(8).toLowerCase()!=b.tagName.toLowerCase())return!1;break;case "Document":if(!b.nodeName||"#document"!=b.nodeName)return!1;break;default:return console.error("An unknown special type '"+c+"' was specified for the argument '"+f+"'."),!1}}else if(null!==b&&!(b.constructor==a||b instanceof a))if(b.isPrototypeOf!=a.isPrototypeOf){c=cycligent.debug.argTypeText(b);var d=cycligent.debug.specTypeText(a);
if(c!=d&&c.substr(0,d.length+1)!=d+".")if(c.split(".")[0]==d.split(".")[0])console.warn("An unverifiable type (due to cross window access) of '"+c+"' was assumed to by of type '"+d+"' because the first segment of the dotted name matched.");else return!1}else return a.prototype instanceof Interface?b.cycligentInterfaces&&-1!=b.cycligentInterfaces.indexOf(a):!1;return!0}var g=0,e={},f,h,m=0,l=!1;if(1==a.length)for(f in b)if(b.hasOwnProperty(f)&&void 0!==a[0]&&null!==a[0]&&void 0!==a[0][f]){l=!0;break}if(l)for(f in b)b.hasOwnProperty(f)&&
(h=a[0][f],void 0!==h?(e[f]=h,g++):e[f]=b[f].defaultValue);else for(f in b)b.hasOwnProperty(f)&&(h=a[m++],void 0!==h?(e[f]=h,g++):e[f]=b[f].defaultValue);if(cycligent.config.debug.args.check){for(f in b)if(b.hasOwnProperty(f)){var k=b[f].type.constructor==Array||b[f].type.constructor instanceof Array;h=k?b[f].type[0]:b[f].type;var p=h.prototype instanceof Interface,m=p?"which does not declare that it implements the interface":"but is required to be of type";if(void 0===e[f])(void 0===b[f].required||
b[f].required)&&console.error("The required argument '"+f+"' "+(p?"which must implement the interface":"of type")+" '"+cycligent.debug.specTypeText(h)+"' was not supplied."+(l?" A single object must be passed as a map. If appropriate use: {"+f+":[Object]} to pass a single object for this function.":""));else if(k)if(e[f]&&(e[f].constructor==Array||e[f].constructor instanceof Array)){if(cycligent.config.debug.args.arrays.check)if(cycligent.config.debug.args.arrays.allElements)for(k=0;k<e[f].length;k++){if(!d(h,
e[f][k])){console.error("Element '"+k+"' of the array passed as an argument was of type '"+cycligent.debug.argTypeText(e[f][k])+"' "+m+" '"+cycligent.debug.specTypeText(h)+"'.");break}}else 0<e[f].length&&!d(h,e[f][0])&&console.error("The first element of the array passed as an argument was of type '"+cycligent.debug.argTypeText(e[f][0])+"' "+m+" '"+cycligent.debug.specTypeText(h)+"'.")}else console.error("An array argument was required but instead an argument of type '"+cycligent.debug.argTypeText(e[f])+
"' was supplied.");else d(h,e[f])||console.error("The argument '"+f+"' was of type '"+cycligent.debug.argTypeText(e[f])+"' "+m+" '"+cycligent.debug.specTypeText(h)+"'.")}if(!c)if(l)for(var n in a[0])a[0].hasOwnProperty(n)&&(b[n]||console.error("Unrecognized argument '"+n+"' was supplied."));else g>a.length&&console.error("Extra arguments were supplied.")}return e};cycligent.definitionGetArgs={name:{type:String,required:!1}};cycligent.definitionGet=function(a){var b=cycligent.args(arguments,cycligent.definitionGetArgs);
if(void 0!==b.name){for(var b=b.name.split("."),c=window,d=0;d<b.length;d++)c=c[b[d]];return c}};cycligent.definitionSetArgs={name:{type:String},value:{type:"Any"}};cycligent.definitionSet=function(a,b){for(var c=cycligent.args(arguments,cycligent.definitionSetArgs),d=c.name.split("."),g=window,e=0;e<d.length-1;e++)g=g[d[e]];return g[d[d.length-1]]=c.value};cycligent.classes={};cycligent.interfaces={};cycligent.classesToProcess=[];cycligent.interfacesToProcess=[];cycligent.classArgs={name:{type:String},
definition:{type:Object},extends:{type:String,required:!1},implements:{type:String,required:!1}};cycligent.class=function(a){var b=cycligent.args(arguments,cycligent.classArgs);if(b.implements){b.implements=b.implements.split(",");for(var c=0;c<b.implements.length;c++)b.implements[c]=b.implements[c].replace(/(^\s*|\s*$)/g,"")}""==cycligent.classMissing(b)?(cycligent.classProcess(b),cycligent.classProcessDeferred()):(cycligent.classes[b.name]=!1,cycligent.classesToProcess.push(b))};cycligent.singleton=
function(a){var b=cycligent.args(arguments,{className:{type:String}}),c=b.className+".singleton",d=cycligent.definitionGet(c);if(!d&&(d=cycligent.definitionSet({name:c,value:new (cycligent.definitionGet(b.className))}),d.initSingleton)){b=[];for(c=2;c<arguments.length;c++)b.push(arguments[c]);d.initSingleton.apply(d,b)}return d};cycligent.classMissing=function(a){var b="",c=a.name.split("."),d=window,g="window",e;if(1<c.length)for(e=0;e<c.length-1;e++){g+="."+c[e];if(!d[c[e]]){b=g;break}d=d[c[e]]}b||
!a.extends||cycligent.classes[a.extends]||(b=a.extends);if(!b&&a.implements)for(e=0;e<a.implements.length;e++)if(!cycligent.interfaces[a.implements[e]]){b=a.implements[e];break}return b};cycligent.classProcessDeferred=function(){var a=!1,b,c;do{a=!1;for(b=0;b<cycligent.classesToProcess.length;b++)c=cycligent.classesToProcess[b],null!==c&&""==cycligent.classMissing(c)&&(a=!0,cycligent.classProcess(c),cycligent.classesToProcess[b]=null);for(;0<cycligent.classesToProcess.length&&null===cycligent.classesToProcess[cycligent.classesToProcess.length-
1];)cycligent.classesToProcess.pop();for(;0<cycligent.classesToProcess.length&&null===cycligent.classesToProcess[0];)cycligent.classesToProcess.shift()}while(a)};cycligent.classProcess=function(a){var b;b=a.name.match(/\.\w+$/);b=null===b?a.name:b[0].substr(1);0>b.substr(0,1).search(/[A-Z]/)&&console.error("Class '"+a.name+"of the expression '"+a.name+"' should begin with an uppercase letter.");var c=cycligent.definitionGet(a.extends);b=c?c.extend(a.name,a.definition):Class.extend(a.name,a.definition);
if(cycligent.config.debug.on){cycligent.config.debug.args.check&&c&&(c.cyName&&void 0!==cycligent.classes[c.cyName]||console.error("Class '"+a.name+"' tries to extend a non-Class based object '"+(c&&c.cyName?c.cyName:"UNKNOWN")+"'."));if(cycligent.config.debug.interfaces.check||cycligent.config.debug.args.check)if(a.implements){c=a.implements;a.implements instanceof Array||(c=[c]);for(var d=[],g=0;g<c.length;g++)d.push(cycligent.definitionGet(c[g]));b.prototype.cycligentInterfaces=d}else b.prototype.cycligentInterfaces=
[];if(a.implements&&cycligent.config.debug.interfaces.check){var g,e,f="";for(g in d)if(d.hasOwnProperty(g))for(e in(c=d[g])&&c.cyName&&void 0!==cycligent.interfaces[c.cyName]||console.error("Class '"+a.name+"' tries to implement a non-Interface based object '"+(c&&c.cyName?c.cyName:"UNKNOWN")+"'."),c.prototype)c.prototype.hasOwnProperty(e)&&(e in b.prototype?b.prototype[e]instanceof Function?(f=b.prototype[e].toString(),0>f.search(new RegExp("cycligent\\.args\\s*\\(\\s*arguments\\s*\\,\\s*"+c.cyName+
"\\.prototype\\."+e+"\\s*\\)\\s*\\;"))&&console.error("Class "+(a.name?a.name:"?")+" tries to implement the interface "+c.cyName+" but the method '"+e+"' does not have the required signature ("+c.cyName+".prototype."+e+"). Check to make sure you did not forget the .prototype. as part of the name.")):console.error("Class "+(a.name?a.name:"?")+" tries to implement the interface "+c.cyName+" but does not contain the required method: "+e+", although it is present as a non-function."):console.error("Class "+
(a.name?a.name:"?")+" tries to implement the interface "+c.cyName+" but does not contain the required method: "+e+"."))}}b.cyName=a.name;cycligent.definitionSet({name:a.name,value:b});cycligent.classes[a.name]=!0;return b};cycligent.interfaceArgs={name:{type:String,required:!0},definition:{type:Object},extends:{type:String,required:!1}};cycligent.interface=function(a){var b=cycligent.args(arguments,cycligent.interfaceArgs);""==cycligent.interfaceMissing(b)?(cycligent.interfaceProcess(b),cycligent.interfaces[b.name]=
!0,cycligent.interfaceProcessDeferred()):(cycligent.interfaces[b.name]=!1,cycligent.interfacesToProcess.push(b))};cycligent.interfaceMissing=function(a){var b="",c=a.name.split("."),d=window,g="window",e;if(1<c.length)for(e=0;e<c.length-1;e++){g+="."+c[e];if(!d[c[e]]){b=g;break}d=d[c[e]]}b||!a.extends||cycligent.interfaces[a.extends]||(b=a.extends);return b};cycligent.interfaceProcessDeferred=function(){var a=!1,b=!1,c,d;do{b=!1;for(c=0;c<cycligent.interfacesToProcess.length;c++)d=cycligent.interfacesToProcess[c],
null!==d&&""==cycligent.interfaceMissing(this)&&(a=b=!0,cycligent.interfaceProcess(this),cycligent.interfacesToProcess[c]=null);for(;0<cycligent.interfacesToProcess.length&&null===cycligent.interfacesToProcess[cycligent.interfacesToProcess.length-1];)cycligent.interfacesToProcess.pop();for(;0<cycligent.interfacesToProcess.length&&null===cycligent.interfacesToProcess[0];)cycligent.interfacesToProcess.shift()}while(b);a&&cycligent.classProcessDeferred()};cycligent.interfaceProcess=function(a){var b;
a.extends?cycligent.definitionGet(a.extends).extend(a.definition):b=Interface.extend(a.definition);b.cyName=a.name;cycligent.definitionSet(a.name,b)};cycligent.definitionsToProcess=[];cycligent.priorityDefinitions=[];cycligent.define=function(a,b,c){var d=cycligent.args(arguments,{name:{type:String},definition:{type:"Any",required:!1},priority:{type:Number,required:!1}});""==cycligent.definitionMissing(d)?(cycligent.definitionProcess(d),cycligent.definitionProcessDeferred()):cycligent.definitionsToProcess.push(d)};
cycligent.define.execute=function(){cycligent.priorityDefinitions.sort(function(a,b){return a.priority-b.priority});for(var a in cycligent.priorityDefinitions)if(cycligent.priorityDefinitions.hasOwnProperty(a)){if(cycligent.priorityDefinitions[a].definition instanceof Function){var b=cycligent.priorityDefinitions[a].definition();b&&cycligent.definitionSet({name:cycligent.priorityDefinitions[a].name,value:b})}else cycligent.definitionSet({name:cycligent.priorityDefinitions[a].name,value:cycligent.priorityDefinitions[a].definition});
cycligent.classProcessDeferred();cycligent.interfaceProcessDeferred()}};cycligent.definitionMissing=function(a){var b="";a=a.name.split(".");var c=window,d="window",g;if(1<a.length)for(g=0;g<a.length-1;g++){d+="."+a[g];if(!c[a[g]]){b=d;break}c=c[a[g]]}return b};cycligent.definitionProcessDeferred=function(){var a=!1,b,c;do for(a=!1,b=0;b<cycligent.definitionsToProcess.length;b++)c=cycligent.definitionsToProcess[b],null!==c&&""==cycligent.definitionMissing(c)&&(a=!0,cycligent.definitionProcess(c),
cycligent.definitionsToProcess.splice(b,1),b--);while(a)};cycligent.definitionProcess=function(a){cycligent.definitionGet(a.name)||cycligent.definitionSet({name:a.name,value:{}});cycligent.definitionProcess2(a)};cycligent.definitionProcess2=function(a){if(a.definition)if(a.priority)cycligent.priorityDefinitions.push(a);else if(a.definition instanceof Function){var b=a.definition();b&&cycligent.definitionSet({name:a.name,value:b})}else cycligent.definitionSet({name:a.name,value:a.definition})};cycligent.private=
function(a){if(cycligent.config.debug.private.check){var b=a;b||(b=this);var c=arguments.callee.caller.caller,d=!1,g;for(g in b)if(b.hasOwnProperty(g)&&c==b[g]){d=!0;break}d||(console.error("Private method accessed by a method outside of the defining class."),console.trace&&console.trace())}};cycligent.doc=function(){cycligent.Script=function(a,b){}};cycligent.class({name:"cycligent.Script",definition:{init:function(){var a=cycligent.args(arguments,{scriptId:{type:String,required:!0},callback:{type:Function,
required:!1,defaultValue:cycligent.imports.scriptLoaded}});this.scriptId=a.scriptId;this.callback=a.callback;this.url=cycligent.url(this.scriptId);this.debugging&&console.info("Importing script: "+this.scriptId+" ("+this.url+")");var b=this,a=document.createElement("script");a.id=this.scriptId;a.type="text/javascript";a.src=this.url;a.addEventListener("load",function(){b.scriptLoaded()},!1);this.interval=setInterval(function(){b.timeout()},cycligent.config.loader.timeout);document.getElementsByTagName("head")[0].appendChild(a)},
scriptId:null,url:null,interval:null,loaded:!1,debugging:cycligent.config.debug.scripts,scriptLoaded:function(){clearInterval(this.interval);this.loaded=!0;this.debugging&&console.info("Import Complete (Script Loaded): "+this.scriptId);this.callback&&this.callback()},timeout:function(){clearInterval(this.interval);console.error("Script Import Failed: "+this.scriptId)}}});cycligent.doc=function(){cycligent.Imports=function(){}};cycligent.class({name:"cycligent.Imports",definition:{init:function(){cycligent.args(arguments,
{})},scriptsPending:1,scripts:[],scriptsCount:0,Import:function(){var a=cycligent.args(arguments,{scriptId:{type:String,required:!0}});if(!cycligent.test||cycligent.test.doImports)cycligent.imports.scripts[a.scriptId]?cycligent.config.debug.scripts&&console.info("Redundant import of '"+a.scriptId+"' avoided."):(cycligent.imports.scriptsPending++,cycligent.imports.scriptsCount++,cycligent.imports.scripts[a.scriptId]=new cycligent.Script(a.scriptId))},StyleRequired:function(a){cycligent.args(arguments,
{styleId:{type:String,required:!0}});var b=cycligent.url(a,"css");(function(){for(var a=cycligent.args(arguments,{url:{type:String,required:!0}}),b=0;b<document.styleSheets.length;b++)if(document.styleSheets[b].href==a.url||document.styleSheets[b].href==window.location.protocol+"//"+window.location.host+a.url)return!0;return!1})(b)||console.error("Style '"+b+"' was not loaded as required.")},scriptLoaded:function(){cycligent.classProcessDeferred();cycligent.interfaceProcessDeferred();cycligent.imports.scriptsPending--;
0===cycligent.imports.scriptsPending&&cycligent.appLoad.allScriptsLoaded()}}});cycligent.doc=function(){cycligent.import=function(a,b){}};cycligent.doc=function(){cycligent.styleRequired=function(a){}};cycligent.appLoad=function(){function a(){!l&&cycligent.config.debug.startup&&console.info("Scripts "+(f?"":"not ")+"ready, DOM "+(h?"":"not ")+"ready, page "+(m?"":"not ")+"ready.");f&&h&&m&&(window.cycligentConfigOverride&&console.log("Configuration override was present in markup."),!l&&cycligent.config.debug.startup&&
console.info("Cycligent starting application."),d())}function b(){var a,b;for(a=0;a<cycligent.definitionsToProcess.length;a++){b=cycligent.definitionsToProcess[a];var d=b.name.split("."),e=window,f;for(f=0;f<d.length;f++)e[d[f]]||(e[d[f]]={}),e=e[d[f]];cycligent.definitionProcess2(b)}cycligent.classProcessDeferred();cycligent.interfaceProcessDeferred();c()}function c(){cycligent.define.execute();a()}function d(){function a(){cycligent.test?cycligent.test.scaffoldingReady=!0:0==l&&main();l=!0;for(var b=
0;b<k.length;b++)k[b]()}var b,c;for(b=0;b<cycligent.interfacesToProcess.length;b++)c=cycligent.interfacesToProcess[b],console.error("The interface '"+c.name+"' failed to process at startup. Missing dependency '"+cycligent.interfaceMissing(c)+"'.");for(b=0;b<cycligent.classesToProcess.length;b++)c=cycligent.classesToProcess[b],console.error("The class '"+c.name+"' failed to process at startup. Missing dependency '"+cycligent.classMissing(c)+"'.");cycligent.timing.event("Initialize application (time first call to timing.event)",
0);if(!cycligent.config.debug.doNotCatchAllExceptionsOnLocalHost||"localhost"!=window.location.hostname&&"127.0.0.1"!=window.location.hostname)try{a()}catch(d){console.error(d)}else a()}function g(){h=!0;cycligent.timing.event("DOM ready",1);a()}function e(){m=!0;cycligent.timing.event("Page ready",1);a()}var f=!1,h=!1,m=!1,l=!1,k=[];return{load:function(){cycligent.timing.event("Load script dependencies",0);cycligent.imports=new cycligent.Imports;cycligent.import=cycligent.imports.Import;cycligent.styleRequired=
cycligent.imports.StyleRequired;!cycligent.test&&cycligent.config.loader.waitFor.dom?function(a,b){var c=!1,d=!0,e=a.document,f=e.documentElement,g=e.addEventListener?"addEventListener":"attachEvent",h=e.addEventListener?"removeEventListener":"detachEvent",k=e.addEventListener?"":"on",l=function(d){if("readystatechange"!=d.type||"complete"==e.readyState)("load"==d.type?a:e)[h](k+d.type,l,!1),!c&&(c=!0)&&b.call(a,d.type||d)},m=function(){try{f.doScroll("left")}catch(a){setTimeout(m,50);return}l("poll")};
if("complete"==e.readyState)b.call(a,"lazy");else{if(e.createEventObject&&f.doScroll){try{d=!a.frameElement}catch(r){}d&&m()}e[g](k+"DOMContentLoaded",l,!1);e[g](k+"readystatechange",l,!1);a[g](k+"load",l,!1)}}(window,g):h=!0;!cycligent.test&&cycligent.config.loader.waitFor.page?window.onload=e:m=!0;!cycligent.test||cycligent.test.doImports?(cycligent.timing.event("Load startup script and its dependencies",1),cycligent.imports.scriptsPending--,cycligent.import({scriptId:cycligent.config.startupScript})):
(f=!0,cycligent.config.debug.startup&&console.info("Running module initialization code in test mode."),0<cycligent.definitionsToProcess.length?b():c())},allScriptsLoaded:function(){cycligent.config.debug.scripts&&console.info(cycligent.imports.scriptsCount+" script(s) loaded.");f=!0;cycligent.config.debug.startup&&console.info("Running module initialization code.");0<cycligent.definitionsToProcess.length?(cycligent.timing.event("Create assumed definitions",1),b()):c()},notify:function(a){for(var b=
0;b<k.length;b++)if(a===k[b])return;k.push(a)},notifyClear:function(a){for(var b=0;b<k.length;b++)a===k[b]&&(k.splice(b,1),b--)},finished:function(){return l}}}();cycligent.appLoad.load()};cycligent.doc=function(){cycligent._loader=function(){}};
(function(){try{(function(){function a(){function b(){!cycligent.test||cycligent.test.doImports?d<cycligent.config.loader.libs.length?c(cycligent.config.loader.libs[d++]):cycligent.boot():cycligent.boot()}function c(a){cycligent.timing.event(a,1);cycligent.config.debug.scripts&&console.info("Loading boot library '"+a+"'");new cycligent.EarlyLoader("lib"+d+"-script",cycligent.url(a),function(){cycligent.config.debug.scripts&&console.info("Loaded boot library '"+a+"'");b()})}cycligent.timing.event("Load frameworks / synchronous scripts",
0);var d=0;b()}function c(a,b){var c=a.getAttribute("data-"+b);return c||(c=a.getAttribute("x-"+b))?c:c=a.getAttribute(b)}var d=window.cycligentConfigOverride;if(!cycligent.root.deploy){var g=window.location.href.indexOf("/client/"),e=document.getElementById("cycligent-script");e&&void 0===d&&(d=c(e,"config-location"));0>g&&d&&(g=d.indexOf("/client/"));if(0<=g)cycligent.root.client=window.location.href.substr(0,g+7),e&&(cycligent.root.app=c(e,"config-app-root")),cycligent.root.app||(cycligent.root.app=
window.location.href.substr(0,g)),cycligent.root.deploy=cycligent.root.app.substr(0,cycligent.root.app.lastIndexOf("/"));else{g=window.location.pathname.split("/");cycligent.root.deploy=window.location.protocol+"//"+window.location.host;var f;e&&(f=parseInt(c(e,"config-depth")));if(void 0===f||null===f||isNaN(f))f=""!=g[1]&&0>g[1].indexOf(".htm")?1:0;for(e=0;e<f;e++)cycligent.root.deploy+="/"+g[e+1];cycligent.root.client=cycligent.root.deploy;cycligent.root.app=cycligent.root.deploy}f=cycligent.root.app.split("/");
cycligent.root.name=f[f.length-1]}f=cycligent.root.client+"/config.js";d&&(f=d);cycligent.test?cycligent.boot():new cycligent.EarlyLoader("Config",f,function(){cycligent.config?cycligent.loaderValid()&&cycligent.debugValid()&&a():console.error("The configuration loaded but failed to start. The system is unable to start the application.")})})()}catch(a){console.error("Uncaught exception in loader. Exception message: "+a.message),a.stack&&console.error(a.stack)}})();
